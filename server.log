2025/12/30 12:29:58 ğŸ° Crash game loop started
2025/12/30 12:29:58 âœ… Loaded environment variables from .env
2025/12/30 12:29:58 ğŸš€ Unified Event Hub started
2025/12/30 12:29:58 ğŸ”Œ Connecting to Redis...
2025/12/30 12:29:59 âœ… Redis connected successfully - URL: redis-10994.c212.ap-south-1-1.ec2.cloud.redislabs.com:10994
2025/12/30 12:29:59 ğŸ”Œ Connecting to PostgreSQL (Supabase)...
2025/12/30 12:30:06 âœ… PostgreSQL connected successfully (Supabase)
2025/12/30 12:30:06 ğŸ“‹ Initializing database schema...
2025/12/30 12:30:06 âœ… Database schema initialized
2025/12/30 12:30:06 ğŸš€ Server starting on 0.0.0.0:8080
2025/12/30 12:30:06 
2025/12/30 12:30:06 ğŸ“¡ WebSocket Endpoints:
2025/12/30 12:30:06    ws://localhost:8080/ws
2025/12/30 12:30:06    - Subscribe to 'crash' for crash game + history
2025/12/30 12:30:06    - Subscribe to 'chat' for server chat
2025/12/30 12:30:06    - Subscribe to 'rooms' for global rooms
2025/12/30 12:30:06    - Subscribe to 'candleflip:<roomId>' for specific room
2025/12/30 12:30:06 
2025/12/30 12:30:06 ğŸ® Crash Game API:
2025/12/30 12:30:06    POST /api/crash/register - Register a crash bet
2025/12/30 12:30:06    POST /api/crash/cashout - Cash out (gasless)
2025/12/30 12:30:06 
2025/12/30 12:30:06 ğŸ² CandleFlip API:
2025/12/30 12:30:06    POST /api/candle/register - Register a candleflip game
2025/12/30 12:30:06    POST /api/candle/preview-odds - Preview odds
2025/12/30 12:30:06 
2025/12/30 12:30:06 ğŸ” Verification:
2025/12/30 12:30:06    GET /api/verify/:gameId - Verify crash game
2025/12/30 12:30:06    GET /api/health - Health check
2025/12/30 12:30:06 
2025/12/30 12:31:27 ğŸ² Crash game 20251230-122958.797 finished - Peak: 1.00x, Rugged: true
2025/12/30 12:31:27 ğŸ“œ Broadcasted updated crash history (1 games)
2025/12/30 12:31:27 âœ… Contract client initialized - Address: 0x43a01A18a2C947179595A7b17bDCc3d88ecF04F5, Owner: 0x78332a9F4b90571cfB6FBA6561f951CF9dF68745
2025/12/30 12:31:28 ğŸ§¹ Cleaned up crash game 1767077998 (0 players)
2025/12/30 12:31:28 âœ… Stored crash history - Game: 20251230-122958.797, Peak: 1.00x, Rugged: true
2025/12/30 12:31:31 ğŸ“Š Estimated gas: 171896517, using: 206275820
2025/12/30 12:31:31 ğŸ”¨ Calling rugGame(gameId=1767077998)...
2025/12/30 12:31:31 âœ… rugGame transaction sent: 0x4a2639ca1ba488b69132dc0cc57b6e89faa1f670563ef51798af1525dae0777a
2025/12/30 12:31:38 âœ… rugGame confirmed in block 32766711
2025/12/30 12:31:38 âœ… rugGame called on contract - TX: 0x4a2639ca1ba488b69132dc0cc57b6e89faa1f670563ef51798af1525dae0777a
2025/12/30 12:31:49 ğŸ² Crash game 20251230-123142.906 finished - Peak: 1.25x, Rugged: true
2025/12/30 12:31:49 ğŸ“œ Broadcasted updated crash history (2 games)
2025/12/30 12:31:49 âœ… Contract client initialized - Address: 0x43a01A18a2C947179595A7b17bDCc3d88ecF04F5, Owner: 0x78332a9F4b90571cfB6FBA6561f951CF9dF68745
2025/12/30 12:31:49 ğŸ§¹ Cleaned up crash game 1767078102 (0 players)
2025/12/30 12:31:49 âœ… Stored crash history - Game: 20251230-123142.906, Peak: 1.25x, Rugged: true
2025/12/30 12:31:50 ğŸ“Š Estimated gas: 171896517, using: 206275820
2025/12/30 12:31:50 ğŸ”¨ Calling rugGame(gameId=1767078102)...
2025/12/30 12:31:50 âœ… rugGame transaction sent: 0xd4f8d395e647469639bfde1b1cf8ad9fd91b80dc6bbab134c2e09adbfaaed3bb
2025/12/30 12:31:53 âœ… rugGame confirmed in block 32766720
2025/12/30 12:31:53 âœ… rugGame called on contract - TX: 0xd4f8d395e647469639bfde1b1cf8ad9fd91b80dc6bbab134c2e09adbfaaed3bb
2025/12/30 12:33:40 ğŸ² Crash game 20251230-123204.417 finished - Peak: 2.81x, Rugged: true
2025/12/30 12:33:40 ğŸ“œ Broadcasted updated crash history (3 games)
2025/12/30 12:33:40 âœ… Contract client initialized - Address: 0x43a01A18a2C947179595A7b17bDCc3d88ecF04F5, Owner: 0x78332a9F4b90571cfB6FBA6561f951CF9dF68745
2025/12/30 12:33:40 ğŸ§¹ Cleaned up crash game 1767078124 (0 players)
2025/12/30 12:33:40 âœ… Stored crash history - Game: 20251230-123204.417, Peak: 2.81x, Rugged: true
2025/12/30 12:33:41 ğŸ“Š Estimated gas: 171896517, using: 206275820
2025/12/30 12:33:41 ğŸ”¨ Calling rugGame(gameId=1767078124)...
2025/12/30 12:33:42 âœ… rugGame transaction sent: 0x8745336da6eb54cb638b2411b98a821361ec519a8266f3667505db8e273b4124
2025/12/30 12:33:52 âœ… rugGame confirmed in block 32766776
2025/12/30 12:33:52 âœ… rugGame called on contract - TX: 0x8745336da6eb54cb638b2411b98a821361ec519a8266f3667505db8e273b4124
2025/12/30 12:33:58 ğŸ² Crash game 20251230-123355.045 finished - Peak: 1.00x, Rugged: true
2025/12/30 12:33:58 ğŸ“œ Broadcasted updated crash history (4 games)
2025/12/30 12:33:58 âœ… Contract client initialized - Address: 0x43a01A18a2C947179595A7b17bDCc3d88ecF04F5, Owner: 0x78332a9F4b90571cfB6FBA6561f951CF9dF68745
2025/12/30 12:33:58 ğŸ§¹ Cleaned up crash game 1767078235 (0 players)
2025/12/30 12:33:58 âœ… Stored crash history - Game: 20251230-123355.045, Peak: 1.00x, Rugged: true
2025/12/30 12:33:59 ğŸ“Š Estimated gas: 171896517, using: 206275820
2025/12/30 12:33:59 ğŸ”¨ Calling rugGame(gameId=1767078235)...
2025/12/30 12:34:00 âœ… rugGame transaction sent: 0x261420dfdc02cff36d928ebfc8aa1a155075bfa853dab81673e8a52334791fe8
2025/12/30 12:34:04 âœ… rugGame confirmed in block 32766785
2025/12/30 12:34:04 âœ… rugGame called on contract - TX: 0x261420dfdc02cff36d928ebfc8aa1a155075bfa853dab81673e8a52334791fe8
